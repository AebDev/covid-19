<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>covid-19 </title>
    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" href="./images/icon.png">
    <!-- Custom Stylesheet -->
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" >
    
</head>

<body>



        <div class="header">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-xl-12">
                        <nav class="navbar navbar-expand-lg navbar-light">
                            <a class="navbar-brand"  href="index.html">
                                <span>Covid-19</span></a>
                            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent">
                                <span class="navbar-toggler-icon"></span>
                            </button>
                            <div class="collapse navbar-collapse" id="navbarText">
                                <ul class="navbar-nav mr-auto">
                                  <li class="nav-item">
                                    <a class="nav-link" href="index.html">Home</a>
                                  </li>
                                  <li class="nav-item">
                                    <a class="nav-link" href="index2.html">Top Countries</a>
                                  </li>
                                  <li class="nav-item active">
                                    <a class="nav-link" href="#">All Countries<span class="sr-only">(current)</span></a>
                                  </li>
                                </ul>
                              </div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>

        <div class="content-body pt-5">
            <div class="container-fluid">
                
                    <input type="text" class="form-control form-control-lg " id="find_country" placeholder="search...">
                  
                <div class="row py-3" id="test">
                    

                </div>
            </div>
        </div>

        <div class="footer">
            <div class="container">
                <div class="row align-items-center">
                    
                        <div class="col copy_right text-center">
                            Copyright Â© 2020 All Rights Reserved.
                        </div>
                    
                </div>
            </div>
        </div>




    <script>

        var data = null;
        var card = '';
        var f = document.querySelector('#find_country');
var xhr = new XMLHttpRequest();

xhr.open("GET", "https://corona.lmao.ninja/v2/countries");


xhr.addEventListener("readystatechange", function () {
	if (this.readyState === this.DONE) {
        var list = JSON.parse(this.responseText);

        list.sort(function(a, b) {
            return b.cases - a.cases;
        });
        
        console.log(list);
        allCountry(list);
	}

    f.addEventListener('input',function () {
        card = '';
        if (f.value == '') {
            allCountry(list);
        } else {
            
            for (const i in list) {
            
            if (list[i].country.toLowerCase().includes(f.value.toLowerCase())) {
                card  += cardCountry(list[i]);
            }
        }
        
        document.querySelector('#test').innerHTML = card;

        }
    });

});

xhr.send(data);

function allCountry(list) {
    
    for (const i in list) {
            
            card  += cardCountry(list[i]);
        }
        
        document.querySelector('#test').innerHTML = card;
    
}

function cardCountry(item) {
    return '<div class="col-lg-6">'+
                        '<div class="card">'+
                            '<div class="card-header">'+
                                '<h4 class="card-title"><span id="usa_flag" class="mr-2"><img src="'+item.countryInfo.flag+'" width="50" alt=""></span>'+item.country+'</h4>'+
                            '</div>'+
                            '<div class="card-body widget">'+
                                '<div class="row">'+
                                    '<div class="col-xl-3 mb-3">'+
                                       ' <span>Cases</span>'+
                                        '<h4>'+item.cases+'</h4>'+
                                    '</div>'+
                                    '<div class="col-xl-3 mb-3">'+
                                        '<span>Death</span>'+
                                        '<h4>'+item.deaths+'</h4>'+
                                    '</div>'+
                                    '<div class="col-xl-3 mb-3">'+
                                        '<span>Recovered</span>'+
                                        '<h4>'+item.recovered+'</h4>'+
                                    '</div>'+
                                    '<div class="col-xl-3 mb-3">'+
                                        '<span>Today Death</span>'+
                                        '<h4>'+item.todayDeaths+'</h4>'+
                                   ' </div>'+
                                    '<div class="col-xl-3 mb-3">'+
                                        '<span>Today Cases</span>'+
                                        '<h4>'+item.todayCases+'</h4>'+
                                    '</div>'+
                                   ' <div class="col-xl-3 mb-3">'+
                                        '<span>Critical</span>'+
                                        '<h4>'+item.critical+'</h4>'+
                                    '</div>'+
                                    '<div class="col-xl-3 mb-3">'+
                                        '<span>Active Cases</span>'+
                                        '<h4>'+item.active+'</h4>'+
                                    '</div>'+
                                '</div>'+
                            '</div>'+
                        '</div>'+
                    '</div>';
}
    </script>



<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" ></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" ></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script src="https://code.jquery.com/jquery-3.5.0.min.js"></script>

    
</body>

</html>